import{u as j,j as e,H as g,L as x}from"./app-CyGG_1oW.js";import{B as o}from"./button--oM6lK4E.js";import{C as v,a as N,b as C,c as y,d as R}from"./card-CwBY_cAA.js";import{C as w}from"./checkbox-CGkm-Gyc.js";import{A as k,Q as E}from"./app-layout-C4qcy1BE.js";/* empty css            */import"./check-D9nq44sJ.js";import"./createLucideIcon-Bal6-m2p.js";import"./index-Bc-xxaRM.js";import"./index-KR111qyj.js";import"./separator-BIz2wJQu.js";import"./index-dJWcA3nf.js";import"./app-logo-icon-Ce6hHjyp.js";import"./settings-DRtexRmN.js";const $=[{title:"Administration",href:"/admin"},{title:"Roles",href:"/admin/roles"},{title:"Edit",href:"#"}];function q({role:i,permissions:r}){const p=()=>{const s={};return r&&Object.keys(r).forEach(a=>{s[a]=[]}),i&&i.permissions&&Object.entries(i.permissions).forEach(([a,t])=>{s[a]&&(s[a]=[...t])}),s},{data:n,setData:d,put:f,processing:m,errors:c}=j({name:i?.name||"",permissions:p()}),h=s=>{s.preventDefault(),!(l&&n.name!==i.name)&&f(`/admin/roles/${i.id}`)},u=(s,a)=>{const t=n.permissions[s]||[];t.includes(a)?d("permissions",{...n.permissions,[s]:t.filter(b=>b!==a)}):d("permissions",{...n.permissions,[s]:[...t,a]})},l=["super-admin"].includes(i.name);return e.jsxs(k,{breadcrumbs:$,children:[e.jsx(g,{title:`Edit Role: ${i.name}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Edit Role"}),e.jsxs("p",{className:"text-muted-foreground",children:["Modify the role details for all guards: ",i.guards?.join(", ")]})]}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs(x,{href:"/admin/roles",children:[e.jsx(E,{className:"mr-2 size-4"}),"Back to Roles"]})})]}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsxs(C,{children:["Edit Role: ",i.name]}),e.jsxs(y,{children:['Update the details for the role "',i.name,'" across all guards']})]}),e.jsxs(R,{children:[l&&e.jsx("div",{className:"mb-4 rounded-md bg-yellow-50 p-4",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"This is a core role. The role name cannot be changed, but permission assignments can be modified."})}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Role Name *"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>d("name",s.target.value),className:"mt-1 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"e.g., editor",disabled:l}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:c.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assign Permissions"}),e.jsx("div",{className:"mt-2 space-y-4",children:Object.entries(r).map(([s,a])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium mb-2 capitalize",children:[s," Permissions"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:a.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{id:`permission-${s}-${t.id}`,checked:n.permissions[s]?.includes(t.name)||!1,onCheckedChange:()=>u(s,t.name)}),e.jsx("label",{htmlFor:`permission-${s}-${t.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.name})]},`${s}-${t.id}`))})]},s))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(o,{variant:"outline",asChild:!0,children:e.jsx(x,{href:"/admin/roles",children:"Cancel"})}),e.jsx(o,{type:"submit",disabled:m||l&&n.name!==i.name,title:l&&n.name!==i.name?"Core role names cannot be changed":"",children:m?"Updating...":"Update Role"})]})]})]})]})]})]})}export{q as default};
