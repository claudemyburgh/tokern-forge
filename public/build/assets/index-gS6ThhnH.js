import{r as g,a as l,j as e,H as A,L as E}from"./app-8JKC9-0M.js";import{E as K}from"./enhanced-table-CfU3mKnW.js";import{u as U,A as w,p as D,d as R,e as I,f as O}from"./app-layout-C7rImYR-.js";import{B as W}from"./badge-CYthjmLE.js";import{B as _}from"./button-DdGAXN2C.js";import{C as T,a as L,b as F,c as B,d as M}from"./card-Cn2tO9kE.js";import{u as o}from"./index-6Y4-suuw.js";/* empty css            */import"./checkbox-BOhjGnUb.js";import"./index-Cw3DN5XR.js";import"./createLucideIcon-DNo0Xt83.js";import"./index-B_8otrUb.js";import"./index-C6VPg3KZ.js";import"./dialog-B2DdqDdc.js";import"./input-DEVBzqgd.js";import"./eye-BwSYebvK.js";import"./chevron-down-hKligf2C.js";import"./index-dJWcA3nf.js";import"./app-logo-icon-CAYfRcir.js";import"./settings-CN1DwgxG.js";function Q({initialFilter:n="withoutTrash",initialPerPage:x=15,initialSearch:d="",initialPage:p=1,baseUrl:i}){const[u,j]=g.useState(n),[h,S]=g.useState(x),[m,f]=g.useState(d),[v,c]=g.useState(p),[s,t]=g.useState(!1);return g.useEffect(()=>{f(d)},[d]),{currentFilter:u,currentPerPage:h,currentSearch:m,currentPage:v,loading:s,handleFilterChange:r=>{t(!0),j(r),c(1),l.get(i,{filter:r,perPage:h,page:1,search:m},{onSuccess:()=>t(!1),onError:()=>t(!1)})},handlePerPageChange:r=>{t(!0),S(r),c(1),l.get(i,{filter:u,perPage:r,page:1,search:m},{onSuccess:()=>t(!1),onError:()=>t(!1)})},handlePageChange:r=>{t(!0),c(r),l.get(i,{filter:u,perPage:h,page:r,search:m},{onSuccess:()=>t(!1),onError:()=>t(!1)})},handleSearch:r=>{t(!0),f(r),c(1),l.get(i,{filter:u,perPage:h,page:1,search:r},{onSuccess:()=>t(!1),onError:()=>t(!1)})},resetTableState:()=>{j(n),S(x),f(d),c(p)},setLoading:t}}const H=[{title:"Administration",href:"#"},{title:"Users",href:o.index.url()}];function ue({users:n,filter:x,perPage:d,search:p}){const i=U(),{currentFilter:u,currentPerPage:j,currentSearch:h,loading:S,handleFilterChange:m,handlePerPageChange:f,handlePageChange:v,handleSearch:c,setLoading:s}=Q({initialFilter:x,initialPerPage:d,initialSearch:p,initialPage:n?.meta?.current_page||1,baseUrl:o.index.url()}),t=r=>{s(!0),l.delete("/admin/users/bulk",{data:{ids:r},preserveState:!0,preserveScroll:!0,onSuccess:()=>{s(!1)},onError:()=>{s(!1)}})},C=r=>{s(!0),l.post("/admin/users/bulk/restore",{ids:r},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s(!1)},onError:()=>{s(!1)}})},b=r=>{s(!0),l.delete("/admin/users/bulk/force-delete",{data:{ids:r},preserveState:!0,preserveScroll:!0,onSuccess:()=>{s(!1)},onError:()=>{s(!1)}})},P=[{key:"withoutTrash",label:"Without Trash"},{key:"withTrash",label:"With Trash"},{key:"onlyTrash",label:"Only Trash"},{key:"all",label:"All Records"}],y=[{accessorKey:"name",header:"Name",cell:({row:r})=>{const a=r.original;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(R,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(I,{src:a.avatar_small||a.avatar,alt:a.name}),e.jsx(O,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:i(a.name)})]}),e.jsx("strong",{children:a.name})]})}},{accessorKey:"email",header:"Email"},{accessorKey:"roles",header:"Roles",cell:({row:r})=>{const a=r.original.roles;return e.jsx("div",{className:"flex flex-wrap gap-1",children:a.map(k=>e.jsx(W,{variant:"secondary",children:k.name},k.id))})}},{accessorKey:"created_at",header:"Created At",enableHiding:!0,cell:({row:r})=>{const a=r.original.created_at;return a?new Date(a).toLocaleDateString():null}},{accessorKey:"updated_at",header:"Updated At",enableHiding:!0,cell:({row:r})=>{const a=r.original.updated_at;return a?new Date(a).toLocaleDateString():null}},{accessorKey:"deleted_at",header:"Deleted At",enableHiding:!0,cell:({row:r})=>{const a=r.original.deleted_at;return a?new Date(a).toLocaleDateString():null}}],N={view:r=>o.show.url(r),edit:r=>o.edit.url(r),delete:r=>{l.delete(o.destroy.url(r),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s(!1)},onError:()=>{s(!1)}})}};return n?e.jsxs(w,{breadcrumbs:H,children:[e.jsx(A,{title:"Manage Users"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts and their roles"})]}),e.jsx(_,{asChild:!0,children:e.jsxs(E,{href:o.create.url(),children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Add User"]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(T,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"All Users"}),e.jsx(B,{children:"List of all users in the system"})]}),e.jsx(M,{children:e.jsx(K,{columns:y,data:n.data||[],softDelete:!0,columnVisibility:{created_at:!1,updated_at:!1,deleted_at:!1},perPage:j,onPerPageChange:f,onDelete:t,onRestore:C,onForceDelete:b,paginationMeta:n.meta||void 0,onPageChange:v,filters:P,onFilterChange:m,currentFilter:u,onSearch:c,searchPlaceholder:"Search users...",searchQuery:h,loading:S,actions:N})})]})})]})]}):e.jsxs(w,{breadcrumbs:H,children:[e.jsx(A,{title:"Manage Users"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts and their roles"})]}),e.jsx(_,{asChild:!0,children:e.jsxs(E,{href:o.create.url(),children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Add User"]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(T,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"All Users"}),e.jsx(B,{children:"Loading users..."})]}),e.jsx(M,{children:e.jsx("p",{children:"No user data available."})})]})})]})]})}export{ue as default};
