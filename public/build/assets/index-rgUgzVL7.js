import{j as e,H as i,L as d,r as l}from"./app-CrHOJBLP.js";import{u as M,E as T}from"./use-table-state-Cncz4E_C.js";import{u as H,A as c,p as o,a as K,b as R,c as I}from"./app-layout-Cccp6Q9V.js";import{B as $}from"./badge-DSGOqxl8.js";import{B as u}from"./button-DxZQokNh.js";import{C as h,a as m,b as x,c as p,d as f}from"./card-CElr-h34.js";/* empty css            */import"./checkbox-DCwqLa67.js";import"./check-CIAZsSA3.js";import"./createLucideIcon-DCGcOKT3.js";import"./index-ClsM6TgX.js";import"./index-KN2J88GG.js";import"./dialog-Bmy9rTwH.js";import"./input-q8a78dqM.js";import"./eye-_I0Wf51j.js";import"./chevron-down-DBA1UnYG.js";import"./separator-DQ0Y43A3.js";import"./index-dJWcA3nf.js";import"./app-logo-icon-Cz1i6m3s.js";import"./settings-C48kpiKU.js";const j=[{title:"Administration",href:"#"},{title:"Users",href:"/admin/users"}];function ce({users:t,filter:g,perPage:v,search:b}){const S=H(),{currentFilter:y,currentPerPage:N,currentSearch:C,loading:A,handleFilterChange:k,handlePerPageChange:w,handlePageChange:D,handleSearch:P,setLoading:s}=M({initialFilter:g,initialPerPage:v,initialSearch:b,initialPage:t?.meta?.current_page||1,baseUrl:"/admin/users"}),_=r=>{s(!0),l.delete("/admin/users/bulk",{data:{ids:r},preserveState:!0,preserveScroll:!0,onSuccess:()=>{s(!1)},onError:()=>{s(!1)}})},L=r=>{s(!0),l.post("/admin/users/bulk/restore",{ids:r},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s(!1)},onError:()=>{s(!1)}})},U=r=>{s(!0),l.delete("/admin/users/bulk/force-delete",{data:{ids:r},preserveState:!0,preserveScroll:!0,onSuccess:()=>{s(!1)},onError:()=>{s(!1)}})},E=[{key:"withoutTrash",label:"Without Trash"},{key:"onlyTrash",label:"Only Trash"},{key:"all",label:"All Records"}],B=[{accessorKey:"name",header:"Name",cell:({row:r})=>{const a=r.original;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(K,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(R,{src:a.avatar_small||a.avatar,alt:a.name}),e.jsx(I,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:S(a.name)})]}),e.jsx("strong",{children:a.name})]})}},{accessorKey:"email",header:"Email"},{accessorKey:"roles",header:"Roles",cell:({row:r})=>{const a=r.original.roles;return e.jsx("div",{className:"flex flex-wrap gap-1",children:a.map(n=>e.jsx($,{variant:"secondary",children:n.name},n.id))})}},{accessorKey:"created_at",header:"Created At",enableHiding:!0,cell:({row:r})=>{const a=r.original.created_at;return a?new Date(a).toLocaleDateString():null}},{accessorKey:"updated_at",header:"Updated At",enableHiding:!0,cell:({row:r})=>{const a=r.original.updated_at;return a?new Date(a).toLocaleDateString():null}},{accessorKey:"deleted_at",header:"Deleted At",enableHiding:!0,cell:({row:r})=>{const a=r.original.deleted_at;return a?new Date(a).toLocaleDateString():null}}],F={view:r=>`/admin/users/${r}`,edit:r=>`/admin/users/${r}/edit`,delete:r=>{l.delete(`/admin/users/${r}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s(!1)},onError:()=>{s(!1)}})}};return t?e.jsxs(c,{breadcrumbs:j,children:[e.jsx(i,{title:"Manage Users"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts and their roles"})]}),e.jsx(u,{asChild:!0,children:e.jsxs(d,{href:"/admin/users/create",children:[e.jsx(o,{className:"h-4 w-4"}),"Add User"]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(h,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"All Users"}),e.jsx(p,{children:"List of all users in the system"})]}),e.jsx(f,{children:e.jsx(T,{columns:B,data:t.data||[],softDelete:!0,columnVisibility:{created_at:!1,updated_at:!1,deleted_at:!1},perPage:N,onPerPageChange:w,onDelete:_,onRestore:L,onForceDelete:U,paginationMeta:t.meta||void 0,onPageChange:D,filters:E,onFilterChange:k,currentFilter:y,onSearch:P,searchPlaceholder:"Search users...",searchQuery:C,loading:A,actions:F})})]})})]})]}):e.jsxs(c,{breadcrumbs:j,children:[e.jsx(i,{title:"Manage Users"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts and their roles"})]}),e.jsx(u,{asChild:!0,children:e.jsxs(d,{href:"/admin/users/create",children:[e.jsx(o,{className:"mr-2 h-4 w-4"}),"Add User"]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(h,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"All Users"}),e.jsx(p,{children:"Loading users..."})]}),e.jsx(f,{children:e.jsx("p",{children:"No user data available."})})]})})]})]})}export{ce as default};
